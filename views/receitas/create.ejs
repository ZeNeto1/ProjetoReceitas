<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Nova Receita</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <h1><%= receita ? 'Editar Receita' : 'Criar Nova Receita' %></h1>
    
    <form action="<%= receita ? `/receitas/${receita.id}?_method=PUT` : '/receitas' %>" method="POST">
        <div>
            <label>Título<span class="required-mark">*</span>:</label><br>
            <input type="text" placeholder="Ex: Bolo de Cenoura" id="titulo" name="titulo" value="<%= receita ? receita.titulo : '' %>" required>
        </div>
        
        <div>
            <label>Descrição<span class="required-mark">*</span>:</label><br>
            <textarea id="descricao" name="descricao" rows="4" required><%= receita ? receita.descricao : '' %></textarea>
        </div>

        <div>
            <label>Tempo de Preparo (min)<span class="required-mark">*</span>:</label><br>
            <input type="number" placeholder="Ex: 30" id="tempoPreparo" name="tempoPreparo" value="<%= receita ? receita.tempoPreparo : '' %>" required>
        </div>

        <div>
            <label>Autor (Quem está criando?)<span class="required-mark">*</span>:</label><br>
            <select name="autorId" required>
                <option value="">Selecione um autor...</option>
                <% usuarios.forEach(u => { %>
                    <option value="<%= u.id %>" <%= receita && receita.autorId == u.id ? 'selected' : '' %>><%= u.nome %></option>
                <% }) %>
            </select>
        </div>
        <br>
        <button type="submit">Salvar Receita</button>
    </form>
    <a href="/receitas">Cancelar</a>
</body>
</html>